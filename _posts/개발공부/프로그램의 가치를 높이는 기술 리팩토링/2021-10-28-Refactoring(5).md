---
published: false
comments: true
date: 2021-09-28 21:00 GMT+0900
title: 리팩토링(5)_객체 사이의 기능 이동
categories:
 - Refactoring
tags:
 - develop
 - Refactoring
---

# Refactoring (5)_객체 사이의 기능 이동

## 메서드 이동

하나의 클래스에서 기능이 너무 많거나 클래스가 다른 클래스와 과하게 연동이 되어 의존성이 지나칠 때는 메서드를 옮기는 것이 좋다. 
메서드를 옮기면 클래스가 간결해지고 여러 기능을 더 명확하게 할 수 있다.



### 방법

1. 원본 클래스에 정의되어 있는 메서드에 사용되는 모든 기능을 확인한다. 기능을 확인하며 그 기능들도 전부 옮겨야 하는지 판단한다.
   - 옮길 메서드에서만 사용이 되는 기능도 함께 옮길 수 있어야 한다. 
     그 기능이 다른 메서드에도 사용이 된다면 함께 옮기는 것을 고려해야 한다.
2. 원본 클래스의 하위 클래스와 상위 클래스에서 메서드에 대한 다른 선언이 있는지 확인한다.
   * 다른 선언이 있다면 대상 클래스에도 재정의를 넣을 수 있을 때만 옮길 수 있을지도 모른다.
3. 이동할 메서드를 옮길 클래스 안에 선언한다.
4. 원본 메서드의 코드를 대상 메서드에 복사한 후, 대상 클래스 안에서 정상 동작하도록 대상 메서드를 수정한다.
   * 대상 매서드가 원본 매서드를 사용한다면 대상 메서드 안에서 원본 객체를 참조할 방법을 정해야 한다.
     대상 클래스에 원본 객체를 참조하는 기능이 없다면 원본 객체 참조를 대상 매서드에 매개 변수로 전달한다.
   * 대상 매서드에 예외처리 코드가 들어 있다면 예외를 논리적으로 어느 클래스가 처리할지 정한다. 
5. 대상 클래스를 컴파일 한다.
6. 원본 객체에서 대상 객체를 참조할 방법을 정한다.
   * 대상 클래스를 참조하는 속성이나 메서드가 없고 대상 클래스를 참조하는 메서드를 쉽게 작성할 수 없다면 원본 클래스 안에 대상 클래스를 저장할 수 있는 새 속성을 선언해야 한다.
7. 원본 메서드를 위임 메서드로 전환한다.
8. 컴파일과 테스트를 진행한다.
9. 원본 메서드를 삭제하거나 위임 메서드로 사용하도록 유지한다.
10. 컴파일 후 테스트를 진행한다.



> **참고자료**
>
> - 리팩토링_코드 품질을 개선하는 객체지향 사고법 _마틴파울러 저

